<div class="form-heading">
  <div class="row">
    <div class="col-6">
      <h4><i class="fa fa-barcode"></i> Inventory</h4>
    </div>
    <div class="col-6">
      <button
        type="button"
        class="btn btn-info float-right ml-2 mr-2"
        (click)="category()"
      >
        Inventory Category
      </button>
      <!-- <button type="button" class="btn btn-info float-right" (click)="stock()">
        Stock
      </button>
      <button
        type="button"
        class="btn btn-info float-right ml-2 mr-2"
        (click)="promotion()"
      >
        Promotion
      </button> -->
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-sm-6">
      <div class="input-group">
        <input
          class="form-control border-secondary py-2 mb-4 mt-3"
          type="search"
          placeholder="search for a specific product"
          #productSearch
        />
        <div class="input-group-append">
          <button
            (click)="searchProductByName(productSearch.value)"
            class="btn btn-outline-secondary mb-4 mt-3"
            type="button"
          >
            <i class="fa fa-search"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="col-sm-6">
      <button
        type="button"
        class="btn btn-primary btn-lg fa fa-plus mt-3"
        data-toggle="modal"
        data-target="#myModal"
      >
        Add product
      </button>
    </div>
  </div>
</div>

<table class="table">
  <thead>
    <tr>
      <th scope="col">Product Id</th>
      <th scope="col">Name</th>
      <th scope="col">Price</th>
      <th scope="col">Quantity</th>
      <th scope="col">Edit</th>
      <th scope="col">Delete</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let product of products">
      <td>{{ product.ProductID }}</td>
      <td>{{ product.ProductName }}</td>
      <td>{{ product.ProductPrice }}</td>
      <td>{{ product.Quantity }}</td>
      <td>
        <button
          type="button"
          data-toggle="modal"
          data-target="#myModalEdit"
          data-uid="1"
          class="update btn btn-warning btn-sm fa fa-pencil"
          (click)="storeProductData(product.ProductID, product)"
        >
          <span class="glyphicon glyphicon-pencil"></span>
        </button>
      </td>
      <td>
        <button
          type="button"
          data-toggle="modal"
          data-target="#delete"
          (click)="deleteProduct(product.ProductID)"
          class="delete btn btn-danger btn-sm"
        >
          <span class="fa fa-trash"></span>
        </button>
      </td>
    </tr>
  </tbody>
</table>

<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
        <h5 class="modal-title text-dark">Create Product</h5>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            placeholder="Enter Name"
            [(ngModel)]="product.ProductName"
          />
        </div>
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            placeholder="Enter Price"
            [(ngModel)]="product.ProductPrice"
          />
        </div>
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            placeholder="Enter Quantity"
            [(ngModel)]="product.Quantity"
          />
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Close
        </button>
        <button
          type="button"
          class="btn btn-primary fa fa-floppy-o"
          data-dismiss="modal"
          [disabled]="
            !product.ProductName || !product.ProductPrice || !product.Quantity
          "
          (click)="saveProduct()"
        >
          Save
        </button>
      </div>
    </div>
  </div>
</div>

<div id="myModalEdit" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
        <h5 class="modal-title text-dark">Edit Product</h5>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            placeholder="Enter Name"
            [(ngModel)]="updateProductObj.ProductName"
          />
        </div>
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            placeholder="Enter Price"
            [(ngModel)]="updateProductObj.ProductPrice"
          />
        </div>
        <div class="form-group">
          <input
            type="text"
            class="form-control"
            placeholder="Enter Quantity"
            [(ngModel)]="updateProductObj.Quantity"
          />
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Close
        </button>
        <button
          type="button"
          class="btn btn-primary fa fa-floppy-o"
          data-dismiss="modal"
          [disabled]="
            !updateProductObj.ProductName ||
            !updateProductObj.ProductPrice ||
            !updateProductObj.Quantity
          "
          (click)="updateProduct()"
        >
          Save
        </button>
      </div>
    </div>
  </div>
</div>
