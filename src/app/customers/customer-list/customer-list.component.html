<div class="form-heading">
  <div class="row">
    <div class="col-6">
      <h4><i class="fa fa-user-circle"></i> Customers</h4>
    </div>
    <div class="col-6">
      <button
        type="button"
        class="btn btn-info float-right"
        (click)="gotoCustomerGroup()"
      >
        <i class="fa fa-users"></i> Customer Group
      </button>
    </div>
  </div>
</div>

<div class="container">
  <h5>Customer Search</h5>
  <div class="row">
    <div class="col-6">
      <div class="input-group">
        <input
          class="form-control border-secondary py-2"
          type="search"
          placeholder="search"
          #customerNameSearch
        />
        <div class="input-group-append">
          <button
            class="btn btn-outline-secondary"
            type="button"
            (click)="searchCustomerByName(customerNameSearch.value)"
          >
            <i class="fa fa-search"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="form-group">
      <select class="form-control mb-15" id="exampleFormControlSelect1">
        <option>Select group</option>
        <option
          *ngFor="let customerGroup of customerGroupsList"
          [value]="customerGroup.CustomerGroupID"
          >{{ customerGroup.GroupName }}</option
        >
      </select>
    </div>

    <div class="col-3">
      <button
        type="button"
        class="btn btn-primary btn-lg fa fa-plus"
        data-toggle="modal"
        data-target="#myModal"
      >
        Add customer
      </button>
    </div>
  </div>
</div>
<link
  rel="stylesheet"
  type="text/css"
  href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css"
/>
<hr />
<div class="container bootstrap snippet">
  <div class="row">
    <div class="col-lg-12">
      <div class="main-box no-header clearfix">
        <div class="main-box-body clearfix">
          <div class="table-responsive">
            <table class="table user-list">
              <thead>
                <tr>
                  <th><span>Name</span></th>
                  <th><span>Email</span></th>
                  <th><span>Phone Number</span></th>
                  <th><span>Addres</span></th>
                  <th><span>Zip</span></th>
                  <th><span>Km</span></th>
                  <th>Edit</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let customer of customersList">
                  <td>{{ customer.Username }}</td>
                  <td>{{ customer.Email }}</td>
                  <td>{{ customer.Phonenumber }}</td>
                  <td>{{ customer.Address }}</td>
                  <td>{{ customer.Zip }}</td>
                  <td>{{ customer.Km }}</td>
                  <td>
                    <button
                      type="button"
                      data-toggle="modal"
                      data-target="#edit-modal"
                      data-uid="1"
                      class="update btn btn-warning btn-sm fa fa-pencil"
                      (click)="storeCustomerData(customer.UserID, customer)"
                    >
                      <span class="glyphicon glyphicon-pencil"></span>
                    </button>
                  </td>
                  <td>
                    <button
                      type="button"
                      data-toggle="modal"
                      data-target="#delete"
                      (click)="deleteCustomer(customer.UserID)"
                      class="delete btn btn-danger btn-sm"
                    >
                      <span class="fa fa-trash"></span>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="myModal" class="modal fade container" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>

        <div class="container">
          <div class="form-row">
            <div class="col-md-12 mb-3">
              <label for="validationCustom01">Name</label>
              <input
                type="text"
                class="form-control"
                id="validationCustom01"
                value=""
                required
                [(ngModel)]="customerUIObj.Username"
              />
              <div class="valid-feedback">
                Looks good!
              </div>
            </div>

            <div class="col-md-6 mb-3">
              <label for="validationCustom02">ph. Number</label>

              <input
                type="text"
                class="form-control"
                id="validationCustom02"
                value=""
                required
                [(ngModel)]="customerUIObj.Phonenumber"
              />
              <div class="valid-feedback">
                Looks good!
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <label for="validationCustomUsername">Email</label>
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  id="validationCustomUsername"
                  aria-describedby="inputGroupPrepend"
                  required
                  [(ngModel)]="customerUIObj.Email"
                />
                <div class="invalid-feedback">
                  Please choose a email.
                </div>
              </div>
            </div>

            <div class="col-md-12 mb-3">
              <label for="validationCustomUsername">Password</label>
              <div class="input-group">
                <input
                  type="password"
                  class="form-control"
                  id="validationCustomUsername"
                  aria-describedby="inputGroupPrepend"
                  required
                  [(ngModel)]="customerUIObj.Password"
                />
                <div class="invalid-feedback">
                  Please choose a email.
                </div>
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="col-md-6 mb-3">
              <label for="validationCustom03">Address</label>
              <input
                type="text"
                class="form-control"
                id="validationCustom03"
                required
                [(ngModel)]="customerUIObj.Address"
              />
            </div>

            <div class="col-md-3 mb-3">
              <label for="validationCustom05">Zip</label>
              <input
                type="text"
                class="form-control"
                id="validationCustom05"
                required
                [(ngModel)]="customerUIObj.Zip"
              />
              <div class="invalid-feedback">
                Please provide a valid zip.
              </div>
            </div>
            <div class="col-md-3 mb-3">
              <label for="validationCustom05">km/day</label>
              <input
                type="text"
                class="form-control"
                id="validationCustom05"
                required
                [(ngModel)]="customerUIObj.Km"
              />
              <div class="invalid-feedback">
                Please provide a valid city.
              </div>
            </div>
            <div class="col-md-12">
              <div class="form-group">
                <label for="validationCustom05">Customer Group</label>
                <select
                  class="form-control"
                  id="exampleFormControlSelect1"
                  [(ngModel)]="customerUIObj.CustomerGroupID"
                >
                  <option>Select group</option>
                  <option
                    *ngFor="let customerGroup of customerGroupsList"
                    [value]="customerGroup.CustomerGroupID"
                    >{{ customerGroup.GroupName }}</option
                  >
                </select>
              </div>
            </div>
            <div class="col-md-12 mb-3">
              <label for="validationCustom05">Note</label>
              <textarea
                class="form-control"
                [(ngModel)]="customerUIObj.Note"
              ></textarea>
            </div>
          </div>
          <div class="form-group"></div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Close
        </button>
        <button
          type="button"
          class="btn btn-primary fa fa-floppy-o"
          (click)="addCustomer()"
          data-dismiss="modal"
          [disabled]="
            !customerUIObj.Username ||
            !customerUIObj.Phonenumber ||
            !customerUIObj.Email ||
            !customerUIObj.Password ||
            !customerUIObj.CustomerGroupID ||
            !customerUIObj.Address ||
            !customerUIObj.Zip ||
            !customerUIObj.Km ||
            !customerUIObj.Note
          "
        >
          Save
        </button>
      </div>
    </div>
  </div>
</div>

<div id="edit-modal" class="modal fade container" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>

        <div class="container">
          <div class="form-row">
            <div class="col-md-12 mb-3">
              <label for="validationCustom01">Name</label>
              <input
                type="text"
                class="form-control"
                id="validationCustom01"
                value=""
                required
                [(ngModel)]="customerUpdateUIObj.Username"
              />
              <div class="valid-feedback">
                Looks good!
              </div>
            </div>

            <div class="col-md-6 mb-3">
              <label for="validationCustom02">ph. Number</label>

              <input
                type="text"
                class="form-control"
                id="validationCustom02"
                value=""
                required
                [(ngModel)]="customerUpdateUIObj.Phonenumber"
              />
              <div class="valid-feedback">
                Looks good!
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <label for="validationCustomUsername">Email</label>
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  id="validationCustomUsername"
                  aria-describedby="inputGroupPrepend"
                  required
                  [(ngModel)]="customerUpdateUIObj.Email"
                />
                <div class="invalid-feedback">
                  Please choose a email.
                </div>
              </div>
            </div>

            <div class="col-md-12 mb-3">
              <label for="validationCustomUsername">Password</label>
              <div class="input-group">
                <input
                  type="password"
                  class="form-control"
                  id="validationCustomUsername"
                  aria-describedby="inputGroupPrepend"
                  required
                  [(ngModel)]="customerUpdateUIObj.Password"
                />
                <div class="invalid-feedback">
                  Please choose a email.
                </div>
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="col-md-6 mb-3">
              <label for="validationCustom03">Address</label>
              <input
                type="text"
                class="form-control"
                id="validationCustom03"
                required
                [(ngModel)]="customerUpdateUIObj.Address"
              />
            </div>

            <div class="col-md-3 mb-3">
              <label for="validationCustom05">Zip</label>
              <input
                type="text"
                class="form-control"
                id="validationCustom05"
                required
                [(ngModel)]="customerUpdateUIObj.Zip"
              />
              <div class="invalid-feedback">
                Please provide a valid zip.
              </div>
            </div>
            <div class="col-md-3 mb-3">
              <label for="validationCustom05">km/day</label>
              <input
                type="text"
                class="form-control"
                id="validationCustom05"
                required
                [(ngModel)]="customerUpdateUIObj.Km"
              />
              <div class="invalid-feedback">
                Please provide a valid city.
              </div>
            </div>
            <div class="col-md-12">
              <div class="form-group">
                <label for="validationCustom05">Customer Group</label>
                <select
                  class="form-control"
                  id="exampleFormControlSelect1"
                  [(ngModel)]="customerUpdateUIObj.CustomerGroupID"
                >
                  <option>Select group</option>
                  <option
                    *ngFor="let customerGroup of customerGroupsList"
                    [value]="customerGroup.CustomerGroupID"
                    >{{ customerGroup.GroupName }}</option
                  >
                </select>
              </div>
            </div>
            <div class="col-md-12 mb-3">
              <label for="validationCustom05">Note</label>
              <textarea
                class="form-control"
                [(ngModel)]="customerUpdateUIObj.Note"
              ></textarea>
            </div>
          </div>
          <div class="form-group"></div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Close
        </button>
        <button
          type="button"
          class="btn btn-primary fa fa-floppy-o"
          (click)="updateCustomer()"
          data-dismiss="modal"
          [disabled]="
            !customerUpdateUIObj.Username ||
            !customerUpdateUIObj.Phonenumber ||
            !customerUpdateUIObj.Email ||
            !customerUpdateUIObj.Password ||
            !customerUpdateUIObj.CustomerGroupID ||
            !customerUpdateUIObj.Address ||
            !customerUpdateUIObj.Zip ||
            !customerUpdateUIObj.Km ||
            !customerUpdateUIObj.Note
          "
        >
          Update
        </button>
      </div>
    </div>
  </div>
</div>

<div id="delete" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">×</button>
        <h4 class="modal-title">Delete Data</h4>
      </div>
      <div class="modal-body">
        <strong>Are you sure you want to delete this data?</strong>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          id="del"
          class="btn btn-danger"
          data-dismiss="modal"
          (click)="removeCustomer()"
        >
          Delete
        </button>
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
